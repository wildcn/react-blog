{"version":3,"sources":["../static/js/4.43d10eb5.chunk.js","containers/Detail/reducer.js","webpack:///./src/containers/Detail/action.js?0a34"],"names":["webpackJsonp","509","module","__webpack_exports__","__webpack_require__","resetContent","data","arguments","length","undefined","author","fetch","__WEBPACK_IMPORTED_MODULE_2__modules_Apis__","getUserInfo","then","res","json","userInfo","tags","map","item","getTagInfo","push","tagInfo","date","replace","excerpt","rendered","c","content","format","i","__WEBPACK_IMPORTED_MODULE_0_immutable__","reducer","state","initialState","action","type","__WEBPACK_IMPORTED_MODULE_1__action__","console","log","set","payload","Object","defineProperty","value","n","531","getNewsContent","param","api","__WEBPACK_IMPORTED_MODULE_1__modules_Apis__","id","__WEBPACK_IMPORTED_MODULE_0__utils_CallApi__","GET_NEWS_CONTENT","d"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCOA,SAASC,KAAqB,GAARC,GAAQC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,KAQ7B,IANID,EAAKI,QACRC,MAAMC,EAAA,EAAKC,YAAYP,EAAKI,QAAQI,KAAK,SAAAC,GAAA,MAAKA,GAAIC,SAAQF,KAAK,SAACR,GAC/DA,EAAKW,SAAWX,IAIdA,EAAKY,MAAQZ,EAAKY,KAAKV,OAAQ,CAClC,GAAIU,KACJZ,GAAKY,KAAKC,IAAI,SAACC,GACdT,MAAMC,EAAA,EAAKS,WAAWD,GAAMN,KAAK,SAAAC,GAAA,MAAKA,GAAIC,SAAQF,KAAK,SAACR,GAAD,MAAQY,GAAKI,KAAKhB,OAE1EA,EAAKiB,QAAUL,EAGhBZ,EAAKkB,KAAOlB,EAAKkB,KAAKC,QAAQ,IAAI,KAE9BnB,EAAKoB,SAAWpB,EAAKoB,QAAQC,WAChCrB,EAAKoB,QAAQC,SAAWrB,EAAKoB,QAAQC,SAASF,QAAQ,YAAY,WAInE,IAAIG,GAAItB,EAAKuB,QAAQF,QAWrB,OATIrB,GAAKwB,OAITF,EAAIA,EAAEH,QAAQ,mBAAmB,IAEjCG,EAAIA,EAAEH,QAAQ,YAAY,WAE1BnB,EAAKuB,QAAQF,SAAWC,EACjBxB,EAAA2B,EAAAC,EAAA,QAAO1B,GAEf,QAAS2B,KAAsC,GAA9BC,GAA8B3B,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,GAAtB4B,EAAcC,EAAQ7B,UAAA,EAC9C,QAAQ6B,EAAOC,MACd,IAAKC,GAAA,iBAAiB,WAEtB,MADAC,SAAQC,IAAR,4BACON,EAAMO,IAAI,UAAUpC,EAAa+B,EAAOM,SAC/C,SACC,MAAOR,IDhDVS,OAAOC,eAAezC,EAAqB,cAAgB0C,OAAO,GAC7C,IAAIb,GAA0C5B,EAAoB,KAE9DkC,GADkDlC,EAAoB0C,EAAEd,GAChC5B,EAAoB,MAC5DQ,EAA8CR,EAAoB,ICFrF+B,EAAe/B,EAAA2B,EAAAC,EAAA,SACpBH,YAgDD1B,GAAA,WDhCM4C,IACA,SAAU7C,EAAQC,EAAqBC,GAE7C,YErBO,SAAS4C,GAAeC,GAC9B,GAAIC,MAASC,EAAA,EAAKH,eAAiBC,EAAMG,GAArC,GACJ,KAAI,GAAIrB,KAAKkB,GACZC,GAAUnB,EAAV,IAAekB,EAAMlB,GAArB,GAMD,OAJe3B,GAAA2B,EAAAsB,EAAA,IACdH,IAAKA,EACLd,OAAQkB,IFeVX,OAAOC,eAAezC,EAAqB,cAAgB0C,OAAO,IACnCzC,EAAoBmD,EAAEpD,EAAqB,mBAAoB,WAAa,MAAOmD,KACjFnD,EAAoC,eAAI6C,CACpD,IAAIK,GAA+CjD,EAAoB,IEhC5F+C,EAAA/C,EAAA,IAKakD,EAAmB","file":"static/js/4.43d10eb5.chunk.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 509:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_immutable__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__action__ = __webpack_require__(531);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modules_Apis__ = __webpack_require__(79);\nvar initialState=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_immutable__[\"fromJS\"])({content:{}});// 处理正文文章\nfunction resetContent(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};// 增加作者信息\nif(data.author){fetch(__WEBPACK_IMPORTED_MODULE_2__modules_Apis__[\"a\" /* default */].getUserInfo+data.author).then(function(res){return res.json();}).then(function(data){data.userInfo=data;});}// 增加标签信息\nif(data.tags&&data.tags.length){var tags=[];data.tags.map(function(item){fetch(__WEBPACK_IMPORTED_MODULE_2__modules_Apis__[\"a\" /* default */].getTagInfo+item).then(function(res){return res.json();}).then(function(data){return tags.push(data);});});data.tagInfo=tags;}// 处理时间\ndata.date=data.date.replace(/T/,' ');// 处理简介\nif(data.excerpt&&data.excerpt.rendered){data.excerpt.rendered=data.excerpt.rendered.replace(/<br\\s\\/>/g,'</p><p>');}// 处理文章内容\nvar c=data.content.rendered;// 删除gallery内容 通过media_all 字段来实现\nif(data.format==='image'){}// css隐藏\n// 删除空行\nc=c.replace(/<p>&nbsp;<\\/p>/ig,'');// 替换换行符\nc=c.replace(/<br\\s\\/>/g,'</p><p>');data.content.rendered=c;return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_immutable__[\"fromJS\"])(data);}function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments[1];switch(action.type){case __WEBPACK_IMPORTED_MODULE_1__action__[\"GET_NEWS_CONTENT\"]+'_SUCCESS':console.log('\\u6587\\u7AE0\\u8BE6\\u60C5');return state.set('content',resetContent(action.payload));default:return state;}}/* harmony default export */ __webpack_exports__[\"default\"] = (reducer);\n\n/***/ }),\n\n/***/ 531:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GET_NEWS_CONTENT\", function() { return GET_NEWS_CONTENT; });\n/* harmony export (immutable) */ __webpack_exports__[\"getNewsContent\"] = getNewsContent;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_CallApi__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__modules_Apis__ = __webpack_require__(79);\n// 定义顶部导航交互的action\nvar GET_NEWS_CONTENT='article/GET_NEWS_CONTENT';function getNewsContent(param){var api=''+__WEBPACK_IMPORTED_MODULE_1__modules_Apis__[\"a\" /* default */].getNewsContent+param.id+'?';for(var i in param){api+=i+'='+param[i]+'&';}var result=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_CallApi__[\"a\" /* default */])({api:api,action:GET_NEWS_CONTENT});return result;}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.43d10eb5.chunk.js","import {\n\tfromJS,\n} from 'immutable'\nimport {\n\tGET_NEWS_CONTENT\n} from './action'\nimport Apis from '../../modules/Apis'\n\nconst initialState = fromJS({\n\tcontent:{}\n});\n// 处理正文文章\nfunction resetContent(data={}){\n\t// 增加作者信息\n\tif (data.author) {\n\t\tfetch(Apis.getUserInfo+data.author).then(res=>res.json()).then((data)=>{\n\t\t\tdata.userInfo = data;\n\t\t})\n\t}\n\t// 增加标签信息\n\tif (data.tags && data.tags.length) {\n\t\tvar tags = [];\n\t\tdata.tags.map((item)=>{\n\t\t\tfetch(Apis.getTagInfo+item).then(res=>res.json()).then((data)=>tags.push(data));\n\t\t})\n\t\tdata.tagInfo = tags;\n\t}\n\t// 处理时间\n\tdata.date = data.date.replace(/T/,' ');\n\t// 处理简介\n\tif (data.excerpt && data.excerpt.rendered) {\n\t\tdata.excerpt.rendered = data.excerpt.rendered.replace(/<br\\s\\/>/g,'</p><p>')\n\t}\n\t\n\t// 处理文章内容\n\tvar c = data.content.rendered;\n\t// 删除gallery内容 通过media_all 字段来实现\n\tif (data.format === 'image') {\n\t\t// css隐藏\n\t}\n\t// 删除空行\n\tc = c.replace(/<p>&nbsp;<\\/p>/ig,'');\n\t// 替换换行符\n\tc = c.replace(/<br\\s\\/>/g,'</p><p>');\n\n\tdata.content.rendered = c;\n\treturn fromJS(data);\n}\nfunction reducer(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase GET_NEWS_CONTENT+'_SUCCESS':\n\t\tconsole.log(`文章详情`)\n\t\treturn state.set('content',resetContent(action.payload));\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\nexport default reducer;\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Detail/reducer.js","// 定义顶部导航交互的action\n\n\nimport CallApi from '../../utils/CallApi';\nimport Apis from '../../modules/Apis'\nexport const GET_NEWS_CONTENT = 'article/GET_NEWS_CONTENT';\n\nexport function getNewsContent(param) {\n\tvar api = `${Apis.getNewsContent}${param.id}?`;\n\tfor(var i in param){\n\t\tapi += `${i}=${param[i]}&`;\n\t}\n\tconst result = CallApi({\n\t\tapi: api,\n\t\taction: GET_NEWS_CONTENT,\n\t});\n\treturn result;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Detail/action.js"],"sourceRoot":""}